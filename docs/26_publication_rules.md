# Publication Rules

## 1. Общий процесс публикации

Публикация переписанных постов в Telegram начинается с готового сюжета. Далее процесс включает следующие шаги:

1. Подготовка текста и медиа-контента для публикации.
2. Проверка текста на соответствие правилам и форматирование.
3. Формирование предпросмотра поста для проверки отображения.
4. Отправка текста и медиа в Telegram через API.
5. Логирование результата отправки и обновление статуса публикации.

## 2. Чеклист перед публикацией

Перед отправкой поста необходимо пройти следующий чеклист:

- Текст проверен на ошибки и соответствует требованиям стиля.
- Форматирование текста корректно (заголовки, списки, ссылки).
- Все ссылки работают и ведут на актуальные ресурсы.
- Медиа-файлы (изображения, видео) подготовлены и соответствуют требованиям.
- Подтверждена готовность к публикации (галочка или отметка в интерфейсе).

## 3. Предпросмотр

Предпросмотр формируется автоматически на основе подготовленного текста и медиа. Он нужен для:

- Проверки корректности отображения форматирования.
- Оценки визуального восприятия поста в Telegram.
- Выявления возможных ошибок или несоответствий перед отправкой.

Предпросмотр показывает, как именно будет выглядеть пост после публикации.

## 4. Отправка текста и медиа

Отправка сообщений происходит раздельно:

- Сначала отправляется текстовая часть поста.
- Затем последовательно отправляются медиа-файлы в порядке их расположения.
- Если медиа несколько, они отправляются отдельными сообщениями или в виде альбома (если поддерживается).
- Важно соблюдать порядок отправки, чтобы сохранить логику и структуру поста.

Правила работы с медиа:

- Размер и формат файлов должны соответствовать требованиям Telegram.
- Медиа не должно блокировать или задерживать публикацию текста.

## 5. Ошибки при публикации

При сбое публикации происходит следующее:

- Ошибки классифицируются на критические и некритические.
- Критические ошибки (например, недоступность API, превышение лимитов) прерывают публикацию и требуют вмешательства.
- Некритические ошибки (например, неудачная отправка одного из медиа) фиксируются, но публикация продолжается.
- Все ошибки отображаются в интерфейсе с понятным сообщением и рекомендациями.

## 6. Запланированные публикации

Отложенные посты работают так:

- Публикация запускается в заданное время автоматически.
- Если в момент публикации Telegram недоступен, система пытается повторить отправку через определённые интервалы.
- При длительной недоступности пост помечается как «не опубликован» с уведомлением для оператора.
- Запланированные публикации можно редактировать или отменять до момента отправки.

## 7. Повторные публикации

Правила повторных публикаций:

- В случае неудачной публикации допускается повторная отправка после исправления ошибок.
- Повторная публикация должна учитывать уже отправленные части, чтобы избежать дублирования.
- При необходимости пересылки поста в другой канал или чат требуется создание нового задания публикации.
- Все действия по повторной публикации фиксируются в логе.

## 8. Логирование и статус

Фиксируются следующие данные:

- Время и дата публикации.
- Статус отправки (успешно, с ошибками, не отправлено).
- Детали ошибок и предупреждений.
- Идентификаторы отправленных сообщений в Telegram.
- Информация о медиа и тексте, которые были отправлены.

Успешная отправка отображается в интерфейсе зелёной отметкой или соответствующим сообщением.

## 9. Ограничения и лучшие практики

- На данном этапе не поддерживаются сложные интерактивные элементы (кнопки, опросы).
- Максимальный размер медиа ограничен лимитами Telegram.
- Рекомендуется избегать слишком длинных текстов и большого количества медиа в одном посте.
- Для минимизации ошибок следует тщательно проверять контент перед публикацией.
- Используйте предпросмотр для выявления проблем до отправки.
- Обновляйте и проверяйте API ключи и настройки доступа регулярно.
