

# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/), and this project adheres to [Semantic Versioning](https://semver.org/lang/ru/).

## [Unreleased]

### Added
- Реализован модуль аутентификации: кастомный пользователь Django, страницы входа и профиль с полями Telethon.
- Модели проектов/источников/постов и команда `collect_posts` для сбора контента через Telethon.
- Режим `collect_posts --all-users`, позволяющий запускать сборщик сразу для всех пользователей с настроенными Telethon-ключами.
- Расширенные фильтры постов, поиск по ключевым словам и сводка совпадений.
- Пресеты рерайта, выбор инструкций в UI и сохранение последнего использованного пресета.
- Базовые страницы интерфейса: список проектов, лента постов, карточка сюжета и история публикаций.
- Структурированное логирование с идентификаторами корреляции и пользовательская страница ошибки 500.
- Авторазблокировка «зависших» задач в воркерах и дополнительное логирование `worker_batch_processed`, чтобы отслеживать холостые прогоны и количество реанимированных задач.
- Веб-коллектор теперь ставит отдельные задачи на каждый источник, пропуская уже запланированные, и поддерживает индивидуальные retry-настройки (`web_retry_*`) на уровне источника.
- Импорт пресетов автоматически пересохраняет `web_preset_snapshot` у всех связанных источников, поэтому новые заголовки/селекторы вступают в силу сразу.
- Документация обновлена: `docs/23_jobs_and_queues.md` описывает автоанлок, параллелизм и кастомные ретраи; `docs/60_web_preset_guide.md` фиксирует автообновление снапшотов.

### Changed
- Веб-коллектор умеет собирать изображения по нескольким селекторам сразу и убирает дубли; JSON Schema и `docs/60_web_preset_guide.md` дополнились рекомендациями по фотогалереям и смешанным форматам.

### Fixed
- Пресет `ria_animals` извлекает полный текст и фотографии фотолент (`.photoview__desc-text`, `data-photoview-src`), поэтому в ленте снова видны параграфы и иллюстрации.
- Пресет `izvestia_zhivotnye` расширен: контент берётся и из `text-article__inside`, а изображения подхватываются из `data-src` (включая hero-блок), поэтому новости вроде «Предпрофессиональный экзамен…» больше не обрезаются до одного заголовка.

## [0.1.0] – MVP (предстоящий релиз)

### Added
- Авторизация и управление пользователями
- Интеграция с Telethon и сбор постов
- Хранение постов и фильтрация
- Создание сюжетов и отправка в OpenAI
- Публикация постов в Telegram
- Базовый WebUI
- Воркеры и обработка ошибок

## [0.2.0] – Beta (запланировано)

### Added
- Расширенные фильтры и ключевые слова
- Пресеты рерайта и комментарии
- Отложенные публикации
- Генерация изображений
- Логирование и экран ошибок

## [0.3.0] – v1.0 (будущее)

### Added
- CI/CD и автоматическое тестирование
- Улучшенная безопасность и хранение ключей
- Аналитика и статистика
- Дополнительные источники контента
