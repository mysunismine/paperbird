# UI Specifications

## 1. Общие принципы дизайна

- **Адаптивность**: Интерфейс должен корректно отображаться на устройствах с разными размерами экранов — от мобильных телефонов до десктопов. Используется адаптивная сетка Bootstrap для упрощения верстки.
- **Простота**: Минималистичный дизайн с акцентом на удобство пользователя и легкость восприятия информации.
- **Bootstrap как базовый фреймворк**: Использование стандартных компонентов Bootstrap для обеспечения единообразия интерфейса и ускорения разработки.
- **Минимализм интерфейса**: Минимум отвлекающих элементов, четкая типографика, лаконичные кнопки и иконки.

## 2. Страница логина

- **Поля**:
  - Email (обязательное, с валидацией формата)
  - Пароль (обязательное, поле с возможностью показать/скрыть пароль)
- **Кнопки**:
  - Войти — активна при заполнении всех обязательных полей корректно
  - Забыл пароль — ссылка для восстановления доступа
- **Поведение**:
  - При ошибочном вводе отображается сообщение об ошибке под соответствующим полем или общая ошибка авторизации
  - При успешном входе происходит перенаправление на главную страницу
  - Автоматический выход (автологаут) при бездействии пользователя более 30 минут с предупреждением за 1 минуту до выхода
- **Состояния**:
  - Загрузка при отправке формы (дезактивация кнопки, индикатор загрузки)
  - Ошибка авторизации (красное сообщение)
  - Пустые поля (подсветка и сообщение об обязательности)

## 3. Главная навигация

- **Структура меню**:
  - Проекты
  - Лента
  - Сюжеты
  - Публикации
  - Профиль
- **Поведение активных пунктов**:
  - Активный пункт выделяется цветом и/или подчеркиванием
  - При клике происходит переход на соответствующую страницу
  - На мобильных устройствах меню скрывается за кнопкой "гамбургер"
- **Дополнительно**:
  - При наведении на пункты меню отображается подсказка с названием
  - В меню профиля — выпадающее окно с настройками и выходом

## 4. Список проектов

- **Карточки проектов**:
  - Название и краткое описание
  - Счётчики собранных постов и созданных сюжетов
- **Действия**:
  - «Лента постов» — переход к странице фильтрации и анализа постов
  - «Новый сюжет» — открытие формы создания сюжета с предвыбранным проектом
- **Состояния**:
  - Пустой список — сообщение "Пока нет проектов. Создайте проект и подключите источники"
  - Карточки выравниваются по сетке, кнопки фиксированы внизу карточки

## 5. Создание и редактирование проекта

- **Форма содержит поля**:
  - Название (обязательное, текстовое поле)
  - Описание (текстовое поле, многострочное)
  - Источники (мультивыбор из списка доступных источников)
  - Фильтры (набор чекбоксов или тегов для уточнения контента)
  - Целевой канал (выпадающий список с доступными каналами)
  - Срок хранения (числовое поле с единицами измерения, например, дни)
  - Частота опроса (выпадающий список: раз в час, день, неделю и т.д.)
- **Кнопки**:
  - Сохранить — активна при валидных данных
  - Отмена — возвращение к списку проектов без сохранения
- **Поведение**:
  - Валидация обязательных полей при попытке сохранения
  - При успешном сохранении — уведомление и переход к списку проектов
  - При ошибке — отображение сообщений под соответствующими полями
- **Состояния**:
  - Загрузка при сохранении (блокировка формы, индикатор)
  - Пустые поля при создании
  - Предзаполненные поля при редактировании

## 6. Лента постов

- **Фильтры**:
  - По проекту
  - По дате публикации
  - По статусу (новые, просмотренные, опубликованные)
- **Поиск**:
  - Текстовое поле для поиска по содержимому постов
  - Поиск с задержкой (debounce) для уменьшения нагрузки
- **Сортировка**:
  - По дате (новые сверху/снизу)
  - По популярности (если применимо)
- **Пагинация**:
  - Кнопки вперед/назад и номера страниц
  - Автоматическая подгрузка при прокрутке (опционально)
- **Карточка поста**:
  - Канал публикации
  - Дата и время создания
  - Текст (обрезанный до 100 символов с троеточием)
  - Миниатюра медиа (если есть)
- **Предпросмотр полного поста**:
  - При клике на карточку открывается модальное окно или панель с полным текстом и медиа
- **Состояния**:
  - Пустая лента — сообщение "Посты не найдены"
  - Загрузка — индикатор
  - Ошибка загрузки — сообщение с кнопкой повторной попытки

## 7. Массовые действия

- **Выделение постов**:
  - Чекбоксы в карточках постов для выбора
  - Кнопка «Выделить все» для выбора всех постов на странице
- **Кнопки действий**:
  - «Создать сюжет» — активна при выборе хотя бы одного поста
  - «Удалить» — активна при выборе хотя бы одного поста
- **Панель действий**:
  - Появляется сверху ленты при выделении постов
  - Отображает количество выбранных постов
  - Кнопка отмены выделения
- **Поведение**:
  - При удалении — подтверждение удаления с указанием количества постов
  - При создании сюжета — переход к форме создания сюжета с выбранными постами
- **Состояния**:
  - Нет выбранных постов — панель скрыта
  - Процесс выполнения действия — индикатор загрузки

## 8. Создание сюжета

- **Список выбранных постов**:
  - Отображение заголовков и краткого содержания выбранных постов
  - Возможность убрать пост из списка
- **Поле комментария редактора**:
  - Многострочное текстовое поле для добавления комментариев и инструкций
- **Предпросмотр промпта**:
  - Отображение сформированного промпта на основе выбранных постов и комментария
- **Кнопка «Переписать»**:
  - Запускает процесс переписывания текста сюжета
  - При нажатии кнопка блокируется, показывается индикатор загрузки
- **Состояния**:
  - Пустой список постов — сообщение с предложением вернуться к ленте
  - Ошибка переписывания — сообщение с возможностью повторить
  - Успешный переписанный текст отображается в следующем шаге

## 9. Просмотр рерайта

- **Форма с полями**:
  - Title (текстовое поле, обязательное)
  - Text (многострочное поле с отредактированным текстом)
- **Блок пресетов**:
  - Выпадающий список с пресетами рерайта проекта (например, «Деловой стиль», «Разговорный»)
  - При выборе пресета автоматически подставляются связанные инструкции, которые можно дополнить вручную
- **Чекбокс подтверждения**:
  - «Подтверждаю, что текст готов к публикации»
  - Кнопка «Опубликовать» активна только при установленном чекбоксе
- **Предпросмотр итогового поста**:
  - Отображение отформатированного текста и заголовка в режиме просмотра
- **Кнопка «Опубликовать»**:
  - При нажатии происходит публикация поста
  - После успешной публикации — уведомление и переход к списку публикаций
- **Состояния**:
  - Загрузка публикации — блокировка формы, индикатор
  - Ошибка публикации — сообщение с возможностью повторить

## 10. Генерация изображений

- **Всплывающее окно**:
  - Поле комментария для описания желаемого изображения
  - Кнопки:
    - «Сгенерировать» — создает новое изображение на основе комментария
    - «Перегенерировать» — перезапускает генерацию с тем же комментарием
    - «Прикрепить» — добавляет выбранное изображение к текущему посту или сюжету
- **Предпросмотр**:
  - Отображение сгенерированного изображения в окне
  - Возможность увеличить изображение в отдельном просмотрщике
- **Состояния**:
  - Загрузка изображения — индикатор прогресса
  - Ошибка генерации — сообщение с кнопкой повторной попытки
  - Нет комментария — кнопка «Сгенерировать» неактивна

## 11. Публикации

- **Список опубликованных постов**:
  - Заголовок поста
  - Дата и время публикации
  - Статус публикации (успешно, ошибка, в ожидании)
  - Ссылка на Telegram (иконка с переходом)
- **Фильтры**:
  - По дате публикации (выбор периода)
  - По статусу публикации
- **Состояния**:
  - Пустой список — сообщение "Публикации не найдены"
  - Загрузка — индикатор
  - Ошибка загрузки — сообщение с кнопкой повторной попытки

## 12. Ошибки и уведомления

- **Ошибки**:
  - Компактные плашки красного цвета с текстом ошибки
  - Плашки появляются сверху страницы или вблизи элементов с ошибкой
  - Автоматическое скрытие через 5 секунд или по клику
- **Уведомления об успешных операциях**:
  - Зеленые плашки с коротким сообщением (например, «Сохранено», «Опубликовано»)
  - Появляются в верхней части экрана и исчезают через 3 секунды
- **Поведение при сбоях**:
  - При критических ошибках отображается модальное окно с описанием проблемы и возможностью перезагрузки страницы
  - Логирование ошибок для последующего анализа
- **Страница системной ошибки (500)**:
  - Используется обработчик `handler500`, который рендерит шаблон `errors/server_error.html`.
  - В центре экрана — заголовок «Упс! Что-то пошло не так», поясняющий текст и кнопки «Перейти к проектам»/«Открыть ленту».
  - Ниже отображается идентификатор корреляции, если он передан из middleware, чтобы поддержка могла найти нужные логи.
  - Навигационная панель остаётся доступной, пользователь может перейти к другим разделам без перезагрузки.
- **Общие требования**:
  - Все уведомления должны быть доступны для чтения скринридерами
  - Не блокируют работу интерфейса, кроме критических ошибок
- **Список публикаций**:
  - Таблица с колонками «Сюжет», «Проект», «Цель», «Статус», «Дата публикации», «Сообщения»
  - Пагинация по 25 элементов, кнопки «Назад»/«Вперёд»
  - Значок статуса подсвечивается бейджем
  - При отсутствии публикаций выводится информационное сообщение
