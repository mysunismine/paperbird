# Project Backlog

## Обзор
Backlog — это основной список задач проекта, который помогает структурировать работу и расставлять приоритеты. Он содержит все необходимые задачи, разделённые по важности и этапам реализации. Используя backlog, команда может планировать спринты, отслеживать прогресс и фокусироваться на ключевых функциях, необходимых для успешного запуска и развития продукта.

---
## P1 – Высокий приоритет
- [x] В ленте новостей, если я выделил (чек бокс) одну новость, то выделение сохраняется надолго. Нужно либо сделать кнопку "снять выделения" либо сделать так, чтобы оно снималось автоматически, если ты ушел на другую страницу или уже сделал сюжет из этой новости.

- [x] Разработать план внедрения генерации изображений. Частично эта работа уже выполнена, но не реализована на практике и в интерфейсе. Главные требования: пользователь может использовать исходные изображения и медиа файлы из постов, но может ещё и сгенерировать своё изображение. Нужно сделать генерацию идеи (промпта) для генерации изображения: отправлять в llm модель текст сюжета и просить её предложить идею промпта для генерации подходящей иллюстрации. Этот промпт показывать пользователю как рекомендумый. Пользователь либо соглашается с ним и генерирует изображение по рекомендуемому промту либо редактирует его (добавляет что хочет) и генерирует изображение. Сгенерированное изображение можно добавить к сюжету и опубликовать в канале. Продуманную реализцию зафиксировать в документации и после этого добавить нужные задачи в бэклог с низким приоритетом со ссылкой на эту документацию. [Описание реализации](./53_story_images.md).

## P2 – Низкий приоритет (v1.0+)
*Полезные фичи «на потом»:*

- [x] Исправить: Видеомедиа в постах не корректно попадает в post.media_items в ленте.
- [x] Добавить экспорт проектов в файл (JSON/YAML) без выгрузки постов: настройки, источники, снимки пресетов. Здесь нужно как следует продумать воркфлоу и зафиксировать его в документации.
- [x] Сейчас получается, что мы не используем страницу /stories/37/prompt/ потому что предпросмотр промта у нас организован во вкладке отдельного сюжета http://127.0.0.1:8000/stories/37/ Тогда зачем нам страница просмотра промпта? Она либо не нужна, можно убрать.
- [x] Реализовать страницу `/stories/<id>/image/` и вход на неё из сюжета, чтобы редактор мог работать с изображениями (из постов, генерация, загрузка).
- [x] Добавить провайдера Gemini для генерации изображений (после получения спецификации API, модели и форматов ответов).
- [x] Продумать идею веб-страниц опубликованных новостей для каждого из проекта в формате похожем на блог (для внешних читателей). [Док](./63_public_pages.md)
- Разработать возможность экспорта проекта из json и yaml.
---

## P3 – Идеи и эксперименты (будущее)
*Долгосрочные планы:*

- Интерактивный UI для создания парсеров сайтов (визуальный скрапер) без написания кода. [Подробности](./33_visual_scraper_implementation.md)
- Внедрение сервиса по генерации иллюстраций к публикациям
- Поддержка дополнительных источников контента (RSS, веб-парсер)  
- Командная работа и роли пользователей  
- Версионирование сюжетов  
- Аналитика эффективности публикаций  
- Расширенная интеграция с ботами и внешними API  
- Генерация визуальных обложек и метаданных

---

## Технический долг и рефакторинг
*Задачи по улучшению архитектуры:*

- Оптимизация структуры БД  
- Миграция на S3 для хранения медиа  
- Улучшение конфигурации и параметров через `.env`
- Разбить крупные файлы по ответственностям для улучшения читаемости и тестируемости:
  - `src/projects/models.py` (~770 строк): разделить модели/менеджеры/валидаторы на модули.
  - `src/stories/paperbird_stories/models.py` (~600 строк): вынести вспомогательные методы и связанные модели в пакет.
  - [x] `src/projects/services/web_collector.py` (~560 строк): разделить на сбор/парсинг/нормализацию.
  - [x] `src/projects/forms.py` (~500 строк): разнести формы по доменам (проект, источники, промты) в отдельные файлы.
  - [x] `src/projects/services/collector.py` (~440 строк): выделить планирование задач, статусы и утилиты в подмодули.
  - `src/core/models.py` (~430 строк): вынести общие миксины и модели в отдельные файлы.
  - `src/stories/paperbird_stories/forms.py` (~380 строк): разбить формы по функциям (рерайт, публикации, изображения).
  - [x] `src/stories/paperbird_stories/services/images.py` (~370 строк): отделить нормализацию параметров, провайдеры, генерацию.
