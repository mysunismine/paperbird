{% extends "public/base_public.html" %}

{% block title %}Публичные проекты — Paperbird{% endblock %}

{% block content %}
  <header class="page-header reveal">
    <div>
      <div class="eyebrow">Public directory</div>
      <h1 class="title">Кого почитать</h1>
      <p class="subtitle">
        Подборка проектов с открытыми публикациями. Выберите ленту по настроению.
      </p>
    </div>
    <div class="badge">
      Проектов: {{ page_obj.paginator.count|default:0 }}
    </div>
  </header>

  {% if projects %}
    <section class="grid">
      {% for project in projects %}
        <article class="card reveal">
          <a href="{% url 'public:project' project.id %}">
            <div class="eyebrow">Публичная витрина</div>
            <h2 class="card-title">{{ project.public_title|default:project.name }}</h2>
          </a>
          <div class="card-meta">
            <span>Публикаций: {{ project.published_count|default:0 }}</span>
          </div>
          <p class="card-excerpt">
            {{ project.description|default:"Описание не указано." }}
          </p>
        </article>
      {% endfor %}
    </section>

    {% if is_paginated %}
      <nav class="pagination">
        {% if page_obj.has_previous %}
          <a href="?page={{ page_obj.previous_page_number }}">Назад</a>
        {% endif %}
        <span>Страница {{ page_obj.number }} из {{ page_obj.paginator.num_pages }}</span>
        {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}">Далее</a>
        {% endif %}
      </nav>
    {% endif %}
  {% else %}
    <section class="card reveal">
      <h2 class="card-title">Пока пусто</h2>
      <p class="card-excerpt">Витрина появится после публикации первых историй.</p>
    </section>
  {% endif %}
{% endblock %}
