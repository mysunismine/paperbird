Ниже краткое руководство для внедрения Telethon в проект на Python (для “логина” пользователя или бота). Если нужны детали под асинхронный бек-энд (например, FastAPI), могу дополнить.

⸻

1. Установка

pip install telethon

Версия библиотеке соответствует документации.  ￼

⸻

2. Получение api_id и api_hash
	•	Перейдите на https://my.telegram.org → API Development tools → создайте приложение.  ￼
	•	Сохраните api_id как целое число и api_hash как строку.

⸻

3. Создание клиента

from telethon import TelegramClient

api_id = 123456    # замените вашим
api_hash = 'abcdef0123456789abcdef0123456789'

session_name = 'my_session_file'  # имя файла сессии без расширения
client = TelegramClient(session_name, api_id, api_hash)

Имя сессии определяет файл my_session_file.session (по умолчанию) где хранится авторизация.  ￼

⸻

4. Авторизация (логин пользователя)

import asyncio
from telethon.errors import SessionPasswordNeededError

async def main():
    await client.connect()
    if not await client.is_user_authorized():
        phone = input("Enter your phone number (with country code): ")
        await client.send_code_request(phone)
        code = input("Enter the code you received: ")
        try:
            await client.sign_in(phone, code=code)
        except SessionPasswordNeededError:
            password = input("2FA password: ")
            await client.sign_in(password=password)
    print("Logged in:", await client.get_me())

asyncio.run(main())

Это соответствует документации “Manual login”.  ￼
Если используете бот-токен:

await client.start(bot_token='12345:ABCDEF...')

￼

⸻

5. Использование внутри проекта
	•	После await client.get_me() вы можете вызывать методы для отправки сообщений, получения данных.
	•	Если проект асинхронный (например, FastAPI), инстанс клиента можно держать глобально или как dependency-инъекцию.
	•	Следите, чтобы файл сессии не был использован одновременно из разных процессов — могут быть ошибки блокировки БД (sqlite)  ￼

⸻

6. Частые ошибки и проверки
	•	Убедитесь, что api_id — число, api_hash — строка.
	•	Не называйте ваш файл/скрипт telethon.py — это помешает импорту.  ￼
	•	Если Telegram блокирует логины (много неудач) — возможно появится ошибка типа FloodWaitError.  ￼
	•	Если проект запускается в окружении с ограничениями (например, приватный сервер, прокси) — возможно понадобится proxy= параметр при инициализации клиента.  ￼
